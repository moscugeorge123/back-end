Ö
fC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Controllers\BaseApiController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 3
)3 4
]4 5
[ 
ApiController 
] 
public 

class 
BaseApiController "
:# $
ControllerBase% 3
{		 
	protected

 
	IMediator

 
mediator

 $
;

$ %
public 
BaseApiController  
(  !
	IMediator! *
mediator+ 3
)3 4
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
} 
} ý
mC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Controllers\v1\IngredientsController.cs
	namespace 	
WebAPI
 
. 
Controllers 
. 
v1 
{ 
[		 

ApiVersion		 
(		 
$str		 
)		 
]		 
public

 

class

 !
IngredientsController

 &
:

' (
BaseApiController

) :
{ 
public !
IngredientsController $
($ %
	IMediator% .
mediator/ 7
)7 8
:9 :
base; ?
(? @
mediator@ H
)H I
{ 	
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
[0 1
FromBody1 9
]9 :#
CreateIngredientCommand; R
commandS Z
)Z [
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
command* 1
)1 2
)2 3
;3 4
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetById) 0
(0 1
int1 4
id5 7
)7 8
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
new* -"
GetIngredientByIdQuery. D
{E F
IdG I
=J K
idL N
}O P
)P Q
)Q R
;R S
} 	
[ 	
HttpPut	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Update) /
(/ 0
int0 3
id4 6
,6 7
[8 9
FromBody9 A
]A B#
UpdateIngredientCommandC Z
command[ b
)b c
{   	
if!! 
(!! 
id!! 
!=!! 
command!! 
.!! 
Id!!  
)!!  !
{"" 
return## 

BadRequest## !
(##! "
)##" #
;### $
}$$ 
return%% 
Ok%% 
(%% 
await%% 
mediator%% $
.%%$ %
Send%%% )
(%%) *
command%%* 1
)%%1 2
)%%2 3
;%%3 4
}&& 	
[(( 	

HttpDelete((	 
((( 
$str(( 
)(( 
](( 
public)) 
async)) 
Task)) 
<)) 
IActionResult)) '
>))' (
Delete))) /
())/ 0
int))0 3
id))4 6
)))6 7
{** 	
return++ 
Ok++ 
(++ 
await++ 
mediator++ $
.++$ %
Send++% )
(++) *
new++* -#
DeleteIngredientCommand++. E
{++F G
Id++H J
=++K L
id++M O
}++P Q
)++Q R
)++R S
;++S T
},, 	
}-- 
}.. ²

tC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Controllers\v1\JoinShopIngredientController.cs
	namespace 	
WebAPI
 
. 
Controllers 
. 
v1 
{ 
[ 

ApiVersion 
( 
$str 
) 
] 
public		 

class		 (
JoinShopIngredientController		 -
:		- .
BaseApiController		. ?
{

 
public (
JoinShopIngredientController /
(/ 0
	IMediator0 9
mediator: B
)B C
:D E
baseF J
(J K
mediatorK S
)S T
{ 
} 
[ 
HttpPost 
] 
public 
async 
Task 
< 
IActionResult +
>+ ,
Create- 3
(3 4
[4 5
FromBody5 =
]= >$
CreateJoinShopIngredient? W
commandX _
)_ `
{ 
return 
Ok 
( 
await 
mediator  (
.( )
Send) -
(- .
command. 5
)5 6
)6 7
;7 8
} 
} 
} Ñ	
hC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Controllers\v1\OrdersController.cs
	namespace 	
WebAPI
 
. 
Controllers 
. 
v1 
{ 
[ 

ApiVersion 
( 
$str 
) 
] 
public		 

class		 
OrdersController		 !
:		" #
BaseApiController		$ 5
{

 
public 
OrdersController 
(  
	IMediator  )
mediator* 2
)2 3
:4 5
base6 :
(: ;
mediator; C
)C D
{ 	
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Add( +
(+ ,
CreateOrderCommand, >
command? F
)F G
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
command* 1
)1 2
)2 3
;3 4
} 	
} 
} Æ
fC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Controllers\v1\ShopController.cs
	namespace 	
WebAPI
 
. 
Controllers 
. 
v1 
{ 
[		 

ApiVersion		 
(		 
$str		 
)		 
]		 
public

 

class

 
ShopController

 
:

  
BaseApiController

! 2
{ 
public 
ShopController 
( 
	IMediator '
mediator( 0
)0 1
:2 3
base4 8
(8 9
mediator9 A
)A B
{ 	
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
[0 1
FromBody1 9
]9 :
CreateShopCommand; L
commandM T
)T U
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
command* 1
)1 2
)2 3
;3 4
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Get) ,
(, -
)- .
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
new* -
GetShopsQuery. ;
(; <
)< =
)= >
)> ?
;? @
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetById) 0
(0 1
int1 4
id5 7
)7 8
{ 	
return 
Ok 
( 
await 
mediator $
.$ %
Send% )
() *
new* -
GetShopByIdQuery. >
{? @
IdA C
=D E
idF H
}I J
)J K
)K L
;L M
}   	
["" 	
HttpPut""	 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
Update##) /
(##/ 0
int##0 3
id##4 6
,##6 7
[##8 9
FromBody##9 A
]##A B
UpdateShopCommand##C T
command##U \
)##\ ]
{$$ 	
if%% 
(%% 
id%% 
!=%% 
command%% 
.%% 
Id%%  
)%%  !
{&& 
return'' 

BadRequest'' !
(''! "
)''" #
;''# $
}(( 
return)) 
Ok)) 
()) 
await)) 
mediator)) $
.))$ %
Send))% )
())) *
command))* 1
)))1 2
)))2 3
;))3 4
}** 	
}-- 
}.. ¸

PC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Program.cs
	namespace 	
WebAPI
 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
CreateHostBuilder

 
(

 
args

 "
)

" #
.

# $
Build

$ )
(

) *
)

* +
.

+ ,
Run

, /
(

/ 0
)

0 1
;

1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} )
PC:\Users\Andrei\Desktop\HDD repo new\back-end\ShopMicroservice\WebAPI\Startup.cs
	namespace 	
WebAPI
 
{ 
public 

class 
Startup 
{ 
private 
readonly 
string "
MyAllowSpecificOrigins  6
=7 8
$str9 R
;R S
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddApiVersioning %
(% &
config& ,
=>- /
{ 
config 
. 
DefaultApiVersion (
=) *
new+ .
	Microsoft/ 8
.8 9

AspNetCore9 C
.C D
MvcD G
.G H

ApiVersionH R
(R S
$numS T
,T U
$numV W
)W X
;X Y
config 
. /
#AssumeDefaultVersionWhenUnspecified :
=; <
true= A
;A B
config 
. 
ReportApiVersions (
=) *
true+ /
;/ 0
} 
) 
; 
services   
.   
AddControllers   #
(  # $
)  $ %
;  % &
services!! 
.!! 
AddPersistence!! #
(!!# $
Configuration!!$ 1
)!!1 2
;!!2 3
services"" 
."" 
AddApplication"" #
(""# $
)""$ %
;""% &
services## 
.## 
AddCors## 
(## 
options## $
=>##% '
{$$ 
options%% 
.%% 
	AddPolicy%% !
(%%! ""
MyAllowSpecificOrigins%%" 8
,%%8 9
builder%%: A
=>%%B D
{&& 
builder(( 
.(( 
AllowAnyOrigin(( *
(((* +
)((+ ,
.((, -
AllowAnyHeader((- ;
(((; <
)((< =
.((= >
AllowAnyMethod((> L
(((L M
)((M N
;((N O
})) 
))) 
;)) 
}** 
)** 
;** 
services,, 
.,, 
AddTransient,, !
<,,! "!
IIngredientRepository,," 7
,,,7 8 
IngredientRepository,,9 M
>,,M N
(,,N O
),,O P
;,,P Q
services-- 
.-- 
AddTransient-- !
<--! "
IShopRepository--" 1
,--1 2
ShopRepository--3 A
>--A B
(--B C
)--C D
;--D E
services.. 
... 
AddSwaggerGen.. "
(.." #
c..# $
=>..% '
{// 
c00 
.00 

SwaggerDoc00 
(00 
$str00 !
,00! "
new00# &
OpenApiInfo00' 2
{003 4
Title005 :
=00; <
$str00= E
,00E F
Version00G N
=00O P
$str00Q U
}00V W
)00W X
;00X Y
}11 
)11 
;11 
}22 	
public55 
void55 
	Configure55 
(55 
IApplicationBuilder55 1
app552 5
,555 6
IWebHostEnvironment557 J
env55K N
)55N O
{66 	
if77 
(77 
env77 
.77 
IsDevelopment77 !
(77! "
)77" #
)77# $
{88 
app99 
.99 %
UseDeveloperExceptionPage99 -
(99- .
)99. /
;99/ 0
app:: 
.:: 

UseSwagger:: 
(:: 
)::  
;::  !
app;; 
.;; 
UseSwaggerUI;;  
(;;  !
c;;! "
=>;;# %
c;;& '
.;;' (
SwaggerEndpoint;;( 7
(;;7 8
$str;;8 R
,;;R S
$str;;T _
);;_ `
);;` a
;;;a b
}<< 
app>> 
.>> 
UseHttpsRedirection>> #
(>># $
)>>$ %
;>>% &
app@@ 
.@@ 

UseRouting@@ 
(@@ 
)@@ 
;@@ 
appBB 
.BB 
UseAuthorizationBB  
(BB  !
)BB! "
;BB" #
appCC 
.CC 
UseCorsCC 
(CC "
MyAllowSpecificOriginsCC .
)CC. /
;CC/ 0
appEE 
.EE 
UseEndpointsEE 
(EE 
	endpointsEE &
=>EE' )
{FF 
	endpointsGG 
.GG 
MapControllersGG (
(GG( )
)GG) *
;GG* +
}HH 
)HH 
;HH 
}II 	
}JJ 
}KK 